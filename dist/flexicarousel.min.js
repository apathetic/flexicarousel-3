/*! Flexicarousel 2 - v0.3.0 - 2014-03-12
* https://github.com/apathetic/flexicarousel-2
* Copyright (c) 2014 Wes Hatch; Licensed MIT */
var transitions=function(){var e=function(){var e,t=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(t.style[e]!==undefined)return n[e]}();return e&&{end:e}}(),touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,delta,dragging=0,startClientX=0,pixelOffset=0,touchPixelRatio=1,dragThreshold=80,Carousel=function(e,t){this.el=e,this.init(t)};Carousel.prototype={current:0,slides:[],sliding:!1,defaults:{activeClass:"active",beforeClass:"before",afterClass:"after",slideWrap:"ul",slides:"li",infinite:!0},init:function(e){this.options=this._extend({},this.defaults),this.slideWrap=this.el.querySelectorAll(this.options.slideWrap)[0],this.slides=this.el.querySelectorAll(this.options.slides);if(!this.slideWrap)return;if(!this.slides.length)return;return this.slides.length==2&&(this.options.infinite=!1),this.before=this.slides.length-1,this.after=1,this.slides[this.current].classList.add(this.options.activeClass),this.slides[this.after].classList.add(this.options.afterClass),this.options.infinite&&this.slides[this.before].classList.add(this.options.beforeClass),this.slideWrap.addEventListener("touchstart",this.dragStart.bind(this)),this.slideWrap.addEventListener("touchmove",this.drag.bind(this)),this.slideWrap.addEventListener("touchend",this.dragEnd.bind(this)),this},next:function(){this.go(this.current+1)},prev:function(){this.go(this.current-1)},go:function(e){if(e==this.current||this.sliding)return;this.slides[this.current].classList.remove(this.options.activeClass),this.slides[this.before].classList.remove(this.options.beforeClass),this.slides[this.after].classList.remove(this.options.afterClass),this.current=this._loop(e),this.before=this._loop(e-1),this.after=this._loop(e+1),this.move()},move:function(){var e=this;e.sliding=!0,this.slides[this.current].addEventListener(transitions.end,function t(){e.sliding=!1,this.removeEventListener(transitions.end,t)}),this.slides[this.current].classList.add(this.options.activeClass),this.current===0&&!this.options.infinite?this.slides[this.after].classList.add(this.options.afterClass):this.current<=this.slides.length-1&&!this.options.infinite?this.slides[this.before].classList.add(this.options.beforeClass):(this.slides[this.before].classList.add(this.options.beforeClass),this.slides[this.after].classList.add(this.options.afterClass))},dragStart:function(e){if(this.sliding)return!1;e.touches&&(e=e.touches[0]),dragging===0&&(dragging=1,pixelOffset=0,startClientX=e.clientX,this.current===0&&e.clientX>startClientX||this.current===this.slides.length-1&&e.clientX<startClientX?touchPixelRatio=3:touchPixelRatio=1,this.slides[this.current].classList.add("dragging"),this.slides[this.before].classList.add("dragging"),this.slides[this.after].classList.add("dragging"))},drag:function(e){e.preventDefault(),e.touches&&(e=e.touches[0]),delta=e.clientX-startClientX,dragging&&delta!==0&&(pixelOffset=delta/touchPixelRatio,this.slides[this.current].style.webkitTransform="translate("+pixelOffset+"px, 0)",this.slides[this.before].style.webkitTransform="translate("+pixelOffset+"px, 0)",this.slides[this.after].style.webkitTransform="translate("+pixelOffset+"px, 0)")},dragEnd:function(e){dragging=0,this.slides[this.current].classList.remove("dragging"),this.slides[this.before].classList.remove("dragging"),this.slides[this.after].classList.remove("dragging"),this.slides[this.current].style.webkitTransform="translate(0, 0)",this.slides[this.before].style.webkitTransform="translate(0, 0)",this.slides[this.after].style.webkitTransform="translate(0, 0)";if(Math.abs(pixelOffset)>dragThreshold){var t=pixelOffset<0?this.current+1:this.current-1;this.go(t)}},destroy:function(){},_loop:function(e){return(this.slides.length+e%this.slides.length)%this.slides.length},_extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e}},(window.jQuery||window.Zepto)&&function(e){e.fn.carousel=function(t){var n=arguments;return this.each(function(){if(e(this).data("carousel"))return t in Carousel.prototype?Carousel.prototype[t].apply(e(this).data("carousel"),Array.prototype.slice.call(n,1)):(e.error('Method "'+t+'" does not exist on ye olde carousel'),e(this));if(typeof t=="object"||!t){var r=new Carousel(e(this)[0],n);return e(this).data("carousel",r)}})}}(window.jQuery||window.Zepto);