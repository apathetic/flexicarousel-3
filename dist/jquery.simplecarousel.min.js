/*! Simple Carousel - v0.2.0 - 2015-02-19
* Copyright (c) 2015 Wes Hatch; Licensed MIT */
var Carousel=function(a,b){this.handle=a,this.defaults={activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,disableDragging:!1},this.current=0,this.slides=[],this.sliding=!1,this.dragging=!1,this.dragThreshold=50,this.deltaX=0,this.isTouch="ontouchend"in document;var c=document.body.style,d={transform:"transitionend",OTransform:"oTransitionEnd",MozTransform:"transitionend",webkitTransform:"webkitTransitionEnd"};for(var e in d)if(void 0!==c[e]){this.transform=e,this.transition=d[e];break}this.init(b)};Carousel.prototype={init:function(a){return this.options=this._extend(this.defaults,a),(this.slideWrap=this.handle.querySelector(this.options.slideWrap))&&(this.slides=this.slideWrap.querySelectorAll(this.options.slides))?(this.numSlides=this.slides.length,this.width=this.slideWrap.offsetWidth,this.numSlides<this.options.display?void(this.sliding=!0):(this.options.infinite&&this._cloneSlides(this.options.display),this._addClass(this.slides[0],this.options.activeClass),this.options.disableDragging||(this.isTouch?(this.slideWrap.addEventListener("touchstart",this._dragStart.bind(this)),this.slideWrap.addEventListener("touchmove",this._drag.bind(this)),this.slideWrap.addEventListener("touchend",this._dragEnd.bind(this)),this.slideWrap.addEventListener("touchcancel",this._dragEnd.bind(this))):(this.slideWrap.addEventListener("mousedown",this._dragStart.bind(this)),this.slideWrap.addEventListener("mousemove",this._drag.bind(this)),this.slideWrap.addEventListener("mouseup",this._dragEnd.bind(this)),this.slideWrap.addEventListener("mouseleave",this._dragEnd.bind(this)))),this.slideWrap.addEventListener(this.transition,function(){this.sliding=!1,this._removeClass(this.slideWrap,"animate")}.bind(this)),window.addEventListener("resize",this._updateView.bind(this)),window.addEventListener("orientationchange",this._updateView.bind(this)),this)):void 0},next:function(){this.go(this.options.infinite||this.current!==this.numSlides-1?this.current+1:this.numSlides-1)},prev:function(){this.go(this.options.infinite||0!==this.current?this.current-1:0)},go:function(a){if(!this.sliding){if(this.width=this.slideWrap.offsetWidth,0>a||a>=this.numSlides){var b=0>a?this.numSlides:-1;this._slide(-(b*this.width-this.deltaX)+"px"),this.slideWrap.offsetHeight}a=this._loop(a),this.options.onSlide&&this.options.onSlide(a,this.current),this._slide(-(a*this.width)+"px",!0),this._removeClass(this.slides[this.current],this.options.activeClass),this._addClass(this.slides[a],this.options.activeClass),this.current=a,this.deltaX=0}},_dragStart:function(a){var b;return this.sliding?!1:(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.dragThresholdMet=!1,this.dragging=!0,this.cancel=!1,this.startClientX=b?b[0].pageX:a.clientX,this.startClientY=b?b[0].pageY:a.clientY,this.deltaX=0,this.deltaY=0,"mousedown"===a.type,void(("IMG"===a.target.tagName||"A"===a.target.tagName)&&(a.target.draggable=!1)))},_drag:function(a){var b,c=Math.abs;this.dragging&&!this.cancel&&(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.deltaX=(b?b[0].pageX:a.clientX)-this.startClientX,this.deltaY=(b?b[0].pageY:a.clientY)-this.startClientY,this.dragThresholdMet||c(this.deltaX)>c(this.deltaY)&&c(this.deltaX)>10?(a.preventDefault(),this.dragThresholdMet=!0,this._slide(this.deltaX+this.width*-this.current+"px")):c(this.deltaY)>c(this.deltaX)&&c(this.deltaY)>10&&(this.cancel=!0))},_dragEnd:function(){this.dragging&&!this.cancel&&(this.dragging=!1,Math.abs(this.deltaX)<this.dragThreshold?this.go(this.current):this.deltaX>0?this.prev():this.deltaX<0&&this.next())},_slide:function(a,b){b&&(this.sliding=!0,this._addClass(this.slideWrap,"animate")),this.transform?this.slideWrap.style[this.transform]="translate3d("+a+", 0, 0)":this.slideWrap.style.left=a},_loop:function(a){return(this.numSlides+a%this.numSlides)%this.numSlides},_updateView:function(){var a=this;clearTimeout(this.timer),this.timer=setTimeout(function(){a.go(a.current)},300)},_cloneSlides:function(){var a,b,c,d;for(a=this.options.offscreen||1,b=this.options.display+a-1,b=b>this.numSlides?this.numSlides:b,d=this.numSlides;d>this.numSlides-a;d--)c=this.slides[d-1].cloneNode(!0),c.removeAttribute("id"),c.setAttribute("aria-hidden","true"),this._addClass(c,"clone"),this.slideWrap.insertBefore(c,this.slideWrap.firstChild);for(d=0;b>d;d++)c=this.slides[d].cloneNode(!0),c.removeAttribute("id"),c.setAttribute("aria-hidden","true"),this._addClass(c,"clone"),this.slideWrap.appendChild(c);this.slideWrap.style.marginLeft=-a+"00%"},_addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},_removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},_extend:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d=b[c];if(d)for(var e in d)a[e]=d[e]}return a}},(window.jQuery||window.Zepto)&&!function(a){a.fn.carousel=function(b){var c=arguments;return this.each(function(){if(a(this).data("carousel"))return b in Carousel.prototype?Carousel.prototype[b].apply(a(this).data("carousel"),Array.prototype.slice.call(c,1)):(a.error('Method "'+b+'" does not exist on ye olde carousel'),a(this));if("object"==typeof b||!b){var d=new Carousel(a(this)[0],c[0]);return a(this).data("carousel",d)}})}}(window.jQuery||window.Zepto);