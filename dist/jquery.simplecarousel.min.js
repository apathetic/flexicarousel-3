/*! Simple Carousel - v0.3.0 - 2014-10-28
* Copyright (c) 2014 Wes Hatch; Licensed MIT */
var Carousel=function(a,b){this.handle=a,this.defaults={activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,disableDragging:!1},this.current=0,this.slides=[],this.sliding=!1,this.dragging=!1,this.deltaX=0,this.isTouch="ontouchend"in document,this.transform=function(){var a=["transform","webkitTransform","MozTransform","OTransform"],b=a.length,c=document.createElement("fake");for(b;--b;)if(void 0!==c.style[a[b]])return a[b];return!1}(),this.init(b)};Carousel.prototype={init:function(a){return this.options=this._extend(this.defaults,a),(this.slideWrap=this.handle.querySelector(this.options.slideWrap))&&(this.slides=this.slideWrap.querySelectorAll(this.options.slides))?(this.numSlides=this.slides.length,this.width=this.slideWrap.offsetWidth,this.numSlides<this.options.display?void(this.sliding=!0):(this.options.infinite&&this._cloneEndSlides(this.options.display),this._addClass(this.slides[0],this.options.activeClass),this.options.disableDragging||(this.isTouch&&(this.slideWrap.addEventListener("touchstart",this._dragStart.bind(this)),this.slideWrap.addEventListener("touchmove",this._drag.bind(this)),this.slideWrap.addEventListener("touchend",this._dragEnd.bind(this))),this.slideWrap.addEventListener("mousedown",this._dragStart.bind(this)),this.slideWrap.addEventListener("mousemove",this._drag.bind(this)),this.slideWrap.addEventListener("mouseup",this._dragEnd.bind(this))),window.addEventListener("resize",this._updateView.bind(this)),window.addEventListener("orientationchange",this._updateView.bind(this)),this)):void 0},next:function(){this.sliding||!this.options.infinite&&this.current===this.numSlides-1||this.go(this.current+1)},prev:function(){this.sliding||this.go(this.options.infinite||0!==this.current?this.current-1:0)},go:function(a){if(!this.sliding){if(this.width=this.slideWrap.offsetWidth,0>a||a>=this.numSlides){var b=0>a?this.numSlides:-1;this._addClass(this.slideWrap,"no-animation"),this._slide(-(b*this.width-this.deltaX)+"px"),this.slideWrap.offsetHeight,this._removeClass(this.slideWrap,"no-animation")}a=this._loop(a),this.options.beforeSlide&&this.options.beforeSlide(a,this.current),this._slide(-(a*this.width)+"px"),this._removeClass(this.slides[this.current],this.options.activeClass),this._addClass(this.slides[a],this.options.activeClass),this.current=a}},_dragStart:function(a){var b;return this.sliding?!1:(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.dragThresholdMet=!1,this.dragging=!0,this.cancel=!1,this.startClientX=b?b[0].pageX:a.clientX,this.startClientY=b?b[0].pageY:a.clientY,this.deltaX=0,this.deltaY=0,this._addClass(this.slideWrap,"no-animation"),"mousedown"===a.type,void(("IMG"===a.target.tagName||"A"===a.target.tagName)&&(a.target.draggable=!1)))},_drag:function(a){var b,c=Math.abs;this.dragging&&!this.cancel&&(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.deltaX=(b?b[0].pageX:a.clientX)-this.startClientX,this.deltaY=(b?b[0].pageY:a.clientY)-this.startClientY,this.dragThresholdMet||c(this.deltaX)>c(this.deltaY)&&c(this.deltaX)>10?(a.preventDefault(),this.dragThresholdMet=!0,this._slide(this.deltaX+this.width*-this.current+"px")):c(this.deltaY)>c(this.deltaX)&&c(this.deltaY)>10&&(this.cancel=!0))},_dragEnd:function(){this.dragging&&!this.cancel&&(this.dragging=!1,this._removeClass(this.slideWrap,"no-animation"),Math.abs(this.deltaX)<this.dragThreshold?this.go(this.current):this.deltaX>0?this.prev():this.deltaX<0&&this.next())},_loop:function(a){return(this.numSlides+a%this.numSlides)%this.numSlides},_updateView:function(){var a=this;clearTimeout(a.timer),this.timer=setTimeout(function(){a.go(a.current)},500)},_slide:function(a){this.transform?this.slideWrap.style[this.transform]="translate3d("+a+", 0, 0)":this.slideWrap.style.left=a},_cloneEndSlides:function(){var a,b,c,d;for(b=this.options.display,a=this.options.offscreen+2||2,d=this.numSlides;d>this.numSlides-a;d--)c=this.slides[d-1].cloneNode(!0),c.removeAttribute("id"),this._addClass(c,"clone"),this.slideWrap.insertBefore(c,this.slideWrap.firstChild);for(d=0;b+a-1>d;d++)c=this.slides[d].cloneNode(!0),c.removeAttribute("id"),this._addClass(c,"clone"),this.slideWrap.appendChild(c);this.slideWrap.style.marginLeft=-a+"00%"},_addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},_removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},_extend:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d=b[c];if(d)for(var e in d)a[e]=d[e]}return a}},(window.jQuery||window.Zepto)&&!function(a){a.fn.carousel=function(b){var c=arguments;return this.each(function(){if(a(this).data("carousel"))return b in Carousel.prototype?Carousel.prototype[b].apply(a(this).data("carousel"),Array.prototype.slice.call(c,1)):(a.error('Method "'+b+'" does not exist on ye olde carousel'),a(this));if("object"==typeof b||!b){var d=new Carousel(a(this)[0],c[0]);return a(this).data("carousel",d)}})}}(window.jQuery||window.Zepto);