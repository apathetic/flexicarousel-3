/*! Simple Carousel - v0.2.0 - 2015-07-20
* Copyright (c) 2015 Wes Hatch; Licensed MIT */
var Carousel=function(a,b){this.handle=a,this.defaults={activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,offscreen:0,disableDragging:!1},this.current=0,this.slides=[],this.sliding=!1,this.cloned=0,this.dragging=!1,this.dragThreshold=50,this.deltaX=0,this.isTouch="ontouchend"in document;var c=document.body.style,d={transform:"transitionend",OTransform:"oTransitionEnd",MozTransform:"transitionend",webkitTransform:"webkitTransitionEnd"};for(var e in d)if(void 0!==c[e]){this.transform=e,this.transitionEnd=d[e];break}this.init(b)};Carousel.prototype={init:function(a){return this.options=this._extend(this.defaults,a),(this.slideWrap=this.handle.querySelector(this.options.slideWrap))&&(this.slides=this.slideWrap.querySelectorAll(this.options.slides))?(this.numSlides=this.slides.length,this.numSlides<this.options.display?void(this.sliding=!0):(this.options.infinite&&this._cloneSlides(this.options.display),this.go(0),this.options.disableDragging||(this.isTouch?(this.handle.addEventListener("touchstart",this._dragStart.bind(this)),this.handle.addEventListener("touchmove",this._drag.bind(this)),this.handle.addEventListener("touchend",this._dragEnd.bind(this)),this.handle.addEventListener("touchcancel",this._dragEnd.bind(this))):(this.handle.addEventListener("mousedown",this._dragStart.bind(this)),this.handle.addEventListener("mousemove",this._drag.bind(this)),this.handle.addEventListener("mouseup",this._dragEnd.bind(this)),this.handle.addEventListener("mouseleave",this._dragEnd.bind(this)))),window.addEventListener("resize",this._updateView.bind(this)),window.addEventListener("orientationchange",this._updateView.bind(this)),this)):void 0},next:function(){this.go(this.options.infinite||this.current!==this.numSlides-1?this.current+1:this.numSlides-1)},prev:function(){this.go(this.options.infinite||0!==this.current?this.current-1:0)},go:function(a){if(!this.sliding){if(this.width=this.slides[0].offsetWidth,this.offset=this.cloned*this.width,0>a||a>=this.numSlides){var b=0>a?this.current+this.numSlides:this.current-this.numSlides;this._slide(-(b*this.width-this.deltaX)),this.slideWrap.offsetHeight}a=this._loop(a),this.options.onSlide&&this.options.onSlide.call(this,a,this.current),this._slide(-(a*this.width),!0),this._removeClass(this.slides[this.current],this.options.activeClass),this._addClass(this.slides[a],this.options.activeClass),this.current=a}},_dragStart:function(a){var b;return this.sliding?!1:(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.dragThresholdMet=!1,this.dragging=!0,this.cancel=!1,this.startClientX=b?b[0].pageX:a.clientX,this.startClientY=b?b[0].pageY:a.clientY,this.deltaX=0,this.deltaY=0,void(("IMG"===a.target.tagName||"A"===a.target.tagName)&&(a.target.draggable=!1)))},_drag:function(a){var b,c=Math.abs;this.dragging&&!this.cancel&&(a=a.originalEvent||a,b=void 0!==a.touches?a.touches:!1,this.deltaX=(b?b[0].pageX:a.clientX)-this.startClientX,this.deltaY=(b?b[0].pageY:a.clientY)-this.startClientY,this.dragThresholdMet||c(this.deltaX)>c(this.deltaY)&&c(this.deltaX)>10?(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),this.dragThresholdMet=!0,this._slide(-(this.current*this.width-this.deltaX))):c(this.deltaY)>c(this.deltaX)&&c(this.deltaY)>10&&(this.cancel=!0))},_dragEnd:function(){if(this.dragging&&!this.cancel){if(this.dragging=!1,0!==this.deltaX&&Math.abs(this.deltaX)<this.dragThreshold)this.go(this.current);else if(this.deltaX>0){{Math.round(this.deltaX/this.width)}this.prev()}else this.deltaX<0&&this.next();this.deltaX=0}},_slide:function(a,b){if(a-=this.offset,b){this.sliding=!0,this._addClass(this.slideWrap,"animate");var c=400,d=this;setTimeout(function(){d.sliding=!1,d._removeClass(d.slideWrap,"animate")},c)}this.transform?this.slideWrap.style[this.transform]="translate3d("+a+"px, 0, 0)":this.slideWrap.style.left=a+"px"},_loop:function(a){return(this.numSlides+a%this.numSlides)%this.numSlides},_updateView:function(){var a=this;clearTimeout(this.timer),this.timer=setTimeout(function(){a.go(a.current)},300)},_cloneSlides:function(){var a,b,c,d;for(b=this.options.display+this.options.offscreen-1,b=b>this.numSlides?this.numSlides:b,a=this.numSlides-this.options.offscreen-1,d=this.numSlides;d>a;d--)c=this.slides[d-1].cloneNode(!0),c.removeAttribute("id"),c.setAttribute("aria-hidden","true"),this._addClass(c,"clone"),this.slideWrap.insertBefore(c,this.slideWrap.firstChild),this.cloned++;for(d=0;b>d;d++)c=this.slides[d].cloneNode(!0),c.removeAttribute("id"),c.setAttribute("aria-hidden","true"),this._addClass(c,"clone"),this.slideWrap.appendChild(c)},_addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},_removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},_extend:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d=b[c];if(d)for(var e in d)a[e]=d[e]}return a}};